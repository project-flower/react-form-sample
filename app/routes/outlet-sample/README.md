# app/routes/outlet-sample

- Outlet を利用したレイアウト共有ページのサンプルです。
- ローカル ストレージに暗号化された情報と暗号化されていないデータを保存し、  
  バックエンドで復号を行いページに表示します。

# 設計

- [index.tsx](./index.tsx)
  - 最初にユーザーへ誘導するページ。
  - 表示時 / クライアントサイド
    - ローカル ストレージの内容を取得し、ページで利用するデータが取得できた場合は  
      [first](./first/index.tsx) のクエリパラメータ `v` に設定します。
    - [first](./first/index.tsx) へ移動させます。
- [layout.tsx](./layout.tsx)
  - 共通レイアウトを定義します。
- [first](./first) / [index.tsx](./first/index.tsx)
  - ユーザーからの情報入力を受け付けるページ。
  - 表示時
    - サーバーサイド
      - クエリパラメータを含む場合、復号し各項目の既定値に設定します。
    - クライアントサイド
      - ローカルストレージの内容を取得し、暗号化されていないデータを各項目に設定します。
  - フォーム送信時
    - クライアントサイド
      入力された情報の内、暗号化しないデータをローカル ストレージに保存 (更新) します。
    - サーバーサイド
      入力された情報の内、暗号化するデータを暗号化し [second](./second/index.tsx) のクエリパラメータ `v` に設定します。
    - [second](./second/index.tsx) へ移動させます。
- [second](./second) / [index.tsx](./second/index.tsx)
  - ユーザーが [first](./first/index.tsx) で入力した情報を表示します。
  - 表示時 / サーバーサイド
    - クエリパラメータ `v` の値を復号し、ページの表示項目に設定します。
    - クエリパラメータ `v` がない、又は復号に失敗した場合、エラーをスローします。
    - クライアントサイド
      - クエリパラメータ `v` の値をローカルストレージの暗号化値に保存 (更新) します。
